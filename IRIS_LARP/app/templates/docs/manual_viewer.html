{% extends "base.html" %}

{% block head %}
<style>
    /* Terminal-style documentation viewer */
    body {
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
    }
    
    .doc-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 2rem;
    }
    
    .doc-content {
        line-height: 1.8;
    }
    
    .doc-content h1 {
        border-bottom: 2px solid currentColor;
        padding-bottom: 0.5rem;
    }
    
    .doc-content a {
        text-decoration: underline;
    }
    
    .doc-content img {
        max-width: 100%;
        border: 1px solid currentColor;
        border-radius: 4px;
        margin: 1rem 0;
    }
    
    .doc-content table {
        width: 100%;
    }
    
    .doc-content code {
        font-family: 'Courier New', monospace;
    }
    
    .doc-content pre {
        font-family: 'Courier New', monospace;
        white-space: pre-wrap;
        word-wrap: break-word;
    }
    
    /* CRT effect */
    .crt-effect {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        background: repeating-linear-gradient(
            0deg,
            rgba(0, 0, 0, 0.1) 0px,
            rgba(0, 0, 0, 0.1) 1px,
            transparent 1px,
            transparent 2px
        );
        z-index: 1000;
    }
    
    @keyframes scan {
        0% { top: 0; }
        100% { top: 100%; }
    }
    
    .scanline {
        position: fixed;
        left: 0;
        width: 100%;
        height: 2px;
        background: rgba(255, 255, 255, 0.03);
        animation: scan 8s linear infinite;
        pointer-events: none;
        z-index: 1001;
    }
</style>
{% endblock %}

{% block content %}
<div class="crt-effect"></div>
<div class="scanline"></div>

<div class="min-h-screen {{ theme.bg }} {{ theme.text }} font-mono">
    <!-- Header -->
    <div class="sticky top-0 z-50 {{ theme.bg }} border-b {{ theme.border }} p-4 flex justify-between items-center backdrop-blur-sm bg-opacity-90">
        <div class="flex items-center gap-4">
            <span class="text-2xl font-bold animate-pulse">▸</span>
            <h1 class="text-xl font-bold uppercase tracking-widest">{{ title }}</h1>
        </div>
        <div class="flex gap-4">
            <button onclick="window.print()" class="border {{ theme.border }} px-3 py-1 hover:bg-white/10 transition">
                [ TISK ]
            </button>
            <button onclick="window.close()" class="border {{ theme.border }} px-3 py-1 hover:bg-white/10 transition">
                [ ZAVŘÍT ]
            </button>
        </div>
    </div>
    
    <!-- Content -->
    <div class="doc-container">
        <div class="doc-content {{ theme.accent }}">
            {{ content | safe }}
        </div>
        
        <!-- Footer -->
        <div class="mt-16 pt-8 border-t {{ theme.border }} text-center opacity-50 text-sm">
            <p>IRIS SYSTEM // DOKUMENTACE // {{ user.username | upper }}</p>
            <p class="mt-2">--- END OF DOCUMENT ---</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Auto-scroll to anchor if present
    if (window.location.hash) {
        const element = document.querySelector(window.location.hash);
        if (element) {
            element.scrollIntoView({ behavior: 'smooth' });
        }
    }
    
    // Make internal links scroll smoothly
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });
</script>
{% endblock %}
